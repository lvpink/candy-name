HTML
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Solo Noble - 拿破仑孤独棋</title>
    <style>
        :root { --b-s: 90vmin; --c-s: calc(var(--b-s) / 9.5); --gold: #c5a059; }
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #0a0a0a; font-family: "Palatino", "URW Palladio L", "serif"; display: flex; flex-direction: column; justify-content: center; align-items: center; user-select: none; -webkit-user-select: none; }
        
        /* 历史叙事弹窗 - 羊皮纸风格 */
        #napoleon-intro { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, #222 0%, #000 100%); display: flex; justify-content: center; align-items: center; z-index: 9999; transition: opacity 0.8s ease; }
        .parchment { background: #f4e4bc; width: 85%; max-width: 420px; padding: 40px 25px; border-radius: 2px; position: relative; box-shadow: 0 0 100px rgba(0,0,0,0.8); border: 1px solid #d4b483; text-align: center; }
        .parchment::before { content: ""; position: absolute; top: 5px; left: 5px; right: 5px; bottom: 5px; border: 2px solid #8d6e63; pointer-events: none; opacity: 0.4; }
        .parchment h2 { color: #4e342e; font-size: 1.8rem; margin: 0 0 20px; letter-spacing: 4px; border-bottom: 2px solid #8d6e63; display: inline-block; padding-bottom: 5px; }
        .parchment p { color: #5d4037; line-height: 1.8; font-size: 1rem; text-align: justify; margin-bottom: 30px; min-height: 120px; }
        .btn-enter { background: #4e342e; color: #f4e4bc; border: none; padding: 15px 40px; font-size: 1.1rem; font-weight: bold; cursor: pointer; letter-spacing: 2px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: 0.3s; }
        .btn-enter:active { transform: scale(0.95); }

        /* 游戏本体视觉：暗黑琉璃感 */
        .game-stage { display: flex; flex-direction: column; align-items: center; gap: 20px; opacity: 0; transition: opacity 1s; }
        .hud { width: var(--b-s); display: flex; justify-content: space-between; align-items: center; color: var(--gold); font-size: 0.9rem; letter-spacing: 1px; }
        #board { background: #1a1a1a; padding: 15px; border-radius: 50%; border: 10px solid #2a2a2a; box-shadow: 0 0 50px rgba(0,0,0,0.5); border-spacing: 8px; }
        .cell { width: var(--c-s); height: var(--c-s); border-radius: 50%; position: relative; background: #0f0f0f; box-shadow: inset 0 0 10px #000; cursor: pointer; }
        
        /* 琉璃子渲染 */
        .piece::after { content: ""; position: absolute; inset: 2px; border-radius: 50%; opacity: 1; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .piece.selected::after { transform: scale(1.2); filter: brightness(1.3) contrast(1.2); box-shadow: 0 0 20px currentColor; z-index: 10; }
        
        .p1::after { background: radial-gradient(circle at 30% 30%, #ff5f6d, #890010); color: #ff5f6d; }
        .p2::after { background: radial-gradient(circle at 30% 30%, #2193b0, #0d47a1); color: #2193b0; }
        .p3::after { background: radial-gradient(circle at 30% 30%, #11998e, #1b5e20); color: #11998e; }
        .p4::after { background: radial-gradient(circle at 30% 30%, #ffb347, #e65100); color: #ffb347; }
        .p5::after { background: radial-gradient(circle at 30% 30%, #a18cd1, #4a148c); color: #a18cd1; }
        
        .empty::after { opacity: 0; transform: scale(0); }
        .void { visibility: hidden; }
        
        /* 动画 */
        .dust { position: absolute; width: 100%; height: 100%; background: rgba(255,255,255,0.2); border-radius: 50%; animation: blow 0.5s ease-out forwards; pointer-events: none; }
        @keyframes blow { 0% { transform: scale(1); opacity: 0.5; } 100% { transform: scale(3); opacity: 0; } }
    </style>
</head>
<body>

<div id="napoleon-intro">
    <div class="parchment">
        <h2>SOLO NOBLE</h2>
        <p id="typed-text"></p>
        <button class="btn-enter" id="btnStart" style="display: none;">开启孤独博弈</button>
    </div>
</div>

<div class="game-stage" id="stage">
    <div class="hud">
        <span id="counter">REMAINING: 37</span>
        <span style="border: 1px solid var(--gold); padding: 2px 8px; cursor: pointer;" onclick="location.reload()">RESET</span>
    </div>
    <table id="board"></table>
</div>

<script>
    // 1. 历史背景文案（打字机效果解密）
    const story = "1789年，法国大革命的硝烟笼罩了巴士底狱。传说一位被放逐的贵族，在幽暗的囚室中改造了古老的十字棋盘，增加了四个变幻莫测的孔位。这37孔的「孤独棋」随后成为拿破仑行军途中最爱的逻辑试炼。现在，请移除第一颗琉璃子，于方圆之间，破阵突围。";
    let i = 0;
    function typeWriter() {
        if (i < story.length) {
            document.getElementById("typed-text").innerHTML += story.charAt(i);
            i++;
            setTimeout(typeWriter, 40);
        } else {
            document.getElementById("btnStart").style.display = "block";
        }
    }
    window.onload = typeWriter;

    // 2. 核心逻辑混淆加密
    const _Game = (function() {
        let _st = 0, _sel = null;
        // 37孔欧式布局
        const _map = [
            [0,0,1,1,1,0,0], [0,1,1,1,1,1,0], [1,1,1,1,1,1,1], [1,1,1,1,1,1,1], 
            [1,1,1,1,1,1,1], [0,1,1,1,1,1,0], [0,0,1,1,1,0,0]
        ];

        return {
            build: function() {
                const b = document.getElementById('board');
                let html = "";
                for(let y=0; y<7; y++){
                    html += "<tr>";
                    for(let x=0; x<7; x++){
                        const idx = y*7+x;
                        const state = _map[y][x];
                        if(state === 1) {
                            html += `<td class="cell piece p${Math.floor(Math.random()*5)+1}" data-x="${x}" data-y="${y}"></td>`;
                        } else {
                            html += `<td class="cell void"></td>`;
                        }
                    }
                    html += "</tr>";
                }
                b.innerHTML = html;
            },
            tap: function(e) {
                const el = e.target.closest('.piece');
                if(!el) return;

                if(_st === 0) { // 移除第一颗
                    el.classList.replace('piece', 'empty');
                    _st = 1;
                    this.upd();
                    return;
                }

                if(el.classList.contains('empty')) {
                    if(!_sel) return;
                    const x1 = +_sel.dataset.x, y1 = +_sel.dataset.y;
                    const x2 = +el.dataset.x, y2 = +el.dataset.y;
                    if(Math.abs(x1-x2) + Math.abs(y1-y2) === 2 && (x1===x2 || y1===y2)) {
                        const mx = (x1+x2)/2, my = (y1+y2)/2;
                        const mid = document.querySelector(`[data-x="${mx}"][data-y="${my}"]`);
                        if(mid && mid.classList.contains('piece')) {
                            // 执行跳跃
                            el.className = _sel.className;
                            el.classList.remove('selected');
                            _sel.className = 'cell empty';
                            mid.className = 'cell empty';
                            // 视觉反馈
                            const d = document.createElement('div'); d.className='dust'; mid.appendChild(d);
                            _sel = null; this.upd();
                        }
                    }
                } else {
                    if(_sel) _sel.classList.remove('selected');
                    _sel = el;
                    el.classList.add('selected');
                }
            },
            upd: function() {
                document.getElementById('counter').innerText = `REMAINING: ${document.querySelectorAll('.piece').length}`;
            }
        };
    })();

    // 3. 启动交互
    document.getElementById('btnStart').onclick = () => {
        document.getElementById('napoleon-intro').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('napoleon-intro').style.display = 'none';
            document.getElementById('stage').style.opacity = '1';
            _Game.build();
        }, 800);
    };

    document.getElementById('board').onclick = (e) => _Game.tap(e);
</script>
</body>
</html>
